<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/night.css">
		<link rel="stylesheet" href="css/custom.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h2>Don't Get H@ck3d</h1>
					<h4>Tyler Stephenson</h3>
				</section>

				<section>
					<h3>Thank you, sponsors!</h3>
					<img id="sponsors" src="images/sponsors.png" height="500">
				</section>

				<section>
					<section>
						<h3>About Me</h3>
					</section>
					<section>
						<img src="images\mugshot.jpg"/>
					</section>
					<section>
						<ul>
							<li>Backend developer at FocustApps</li>
							<li>Lover of video games and books</li>
							<li>Twitter: <a href="https://twitter.com/ty8356">@ty8356</a></li>
						</ul>
					</section>
					<section>
						<img height="300" src="images\bruno.png"/>
						<img height="300" src="images\steve.png"/>
					</section>
				</section>

				<section>
					<section>
						<h3>What to expect</h3>
					</section>
					<section>
						<ul>
							<li class="fragment">Overview of OWASP</li>
							<li class="fragment">Preventive measures for .NET</li>
							<li class="fragment">A good time</li>
							<li class="fragment">Disclaimer: I am NOT a security professional</>
						</ul>
						<aside class="notes">
							<ul>
								<li>Like to take stuff I know nothing about do a talk on it</li>
							</ul>
						</aside>
					</section>
				</section>

				<section>
					<section>
						<img src="images/toilet.jpg"/>
						<aside class="notes">
							<ul>
								<li>Hopefully, we'll be able to take you from being this guy, goofing around on the toilet....</li>
							</ul>
						</aside>
					</section>
					<section>
						<img src="images/hacker.jpg"/>
						<aside class="notes">
							<ul>
								<li>... to this guy, doing all kinds of cool stuff</li>
							</ul>
						</aside>
					</section>
				</section>

				<section>
					<section>
						<h3>OWASP</h3>
						<h5 class="fragment">Open Web Application Security Project</h5>
						<aside class="notes">
							<ul>
								<li>Open community dedicated to enabling organizations to develop, purchase, and maintain applications and APIs that can be trusted</li>
								<li>Basically people that want the web to be more secure</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>OWASP Top Ten</h3>
						<ul>
							<li class="fragment">Injection</li>
							<li class="fragment">Broken Authentication</li>
							<li class="fragment">Sensitive Data Exposure</li>
							<li class="fragment">XML External Entities (XXE)</li>
							<li class="fragment">Broken Access Control</li>
							<li class="fragment">Security Misconfiguration</li>
							<li class="fragment">Cross-Site Scripting (XSS)</li>
							<li class="fragment">Insecure Deserialization</li>
							<li class="fragment">Using Components with Known Vulnerabilities</li>
							<li class="fragment">Insufficient Logging & Monitoring</li>
						</ul>
						<aside class="notes">
							<ul>
								<li>Top ten security weaknesses</li>
								<li>Based on data submissions that come from firms specializing in app sec</li>
							</ul>
						</aside>
					</section>
				</section>

				<section>
					<section>
						<h3>Injection</h3>
						<aside class="notes">
							<ul>
								<li>Injection section!</li>
							</ul>
						</aside>
					</section>
					<section>
						<img src="images\sqlinjection.jpg" height="300"/>
					</section>
					<section>
						<p>When an attacker sends hostile data to an interpreter</p>
						<aside class="notes">
							<ul>
								<li>Occurs when untrusted data is sent to an interpreter as part of a command or query</li>
								<li>Tricks the interpreter into executing unintended commands or accessing data without proper authorization</li>
								<li>Obviously, we've all heard of SQL injection</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Types of Injection</h3>
						<p class="fragment">SQL</p>
						<p class="fragment">LDAP</p>
						<p class="fragment">XPath</p>
						<p class="fragment">NoSQL queries</p>
						<p class="fragment">And many more...</p>
						<aside class="notes">
							<ul>
								<li>Some of the more common injections are SQL, NoSQL, OS command, Object Relational Mapping (ORM), LDAP, and Expression Language (EL) or Object Graph Navigation Library (OGNL) injection.</li>
								<li>SQL</li>
								<li>NoSQL</li>
								<li>OS Command</li>
								<li>Object Relational Mapping (ORM)</li>
								<li>Lightweight Directory Access Protocol (LDAP) - similar to SQL but against Active Directory</li>
								<li>Expression Language (EL) - used in Java web applications for embedding expressions into web pages</li>
								<li>Object Graph Navigation Library (OGNL) - more Java</li>
							</ul>
						</aside>

					</section>
					<section>
						<h4>What could I be doing wrong?</h4>
						<p class="fragment">Blindly accepting input</p>
						<p class="fragment">Concatenation</p>
					</section>
					<section>
						<h3>Impacts</h3>
						<p class="fragment">Data Loss</p>
						<p class="fragment">Data Corruption</p>
						<p class="fragment">Data Disclosure</p>
						<p class="fragment">Loss of Accountability</p>
						<p class="fragment">Denial of Access</p>
					</section>
					<section>
						<h3>Prevention</h3>
					</section>
					<section>
						<p>Validate input on the backend</p>
						<aside class="notes">
							<ul>
								<li>There are a couple ways you could do this</li>
								<li>Validate directly, checking to see if the input matches a set string</li>
								<li>Use explicit types</li>
							</ul>
						</aside>
					</section>
					<section>
						<pre><code data-trim>
							[HttpGet]
							public void Get([FromQuery] string search)
							{
								var query = "SELECT * FROM Pets WHERE Id = " + search;

								// Execute the query
							}
						</code></pre>
						<aside class="notes">
							<ul>
								<li>So here's a pretty good example</li>
								<li>Obviously, there are a few things that could be done differently here</li>
								<li>We have an API endpoint that is searching for a pet by ID</li>
								<li>But not very well</li>
								<li>I'm assuming that most of us wouldn't do it like this</li>
							</ul>
						</aside>
					</section>
					<section>
						<p class="fragment">search = "1"</p>
						<pre class="fragment"><code data-trim>
							SELECT * FROM Pets WHERE Id = 1
						</code></pre>
						<p class="fragment">search = "1 OR 1=1"</p>
						<pre class="fragment"><code data-trim>
							SELECT * FROM Pets WHERE Id = 1 OR 1=1
						</code></pre>
						<aside class="notes">
							<ul>
								<li>So what happens if it's called like it's supposed to be?</li>
								<li>Everything's great!</li>
								<li>BUT, what if someone calls the endpoint maliciously?</li>
								<li>We have a different story</li>
								<li>This is what our concatenated SQL query would look like</li>
								<li>So what does this mean?</li>
								<li>1=1 pretty much invalidates our query and everything is returned</li>
							</ul>
						</aside>
					</section>
					<section>
						<pre><code data-trim>
							[HttpGet]
							public void Get([FromQuery] int search)
							{
								var query = "SELECT * FROM Pets WHERE Id = " + search;

								// Execute the query
							}
						</code></pre>
						<aside class="notes">
							<ul>
								<li>Let's add a data type</li>
								<li>Now, our attacker literally CAN'T pass in the malicious string</li>
								<li>It HAS to be an ID</li>
							</ul>
						</aside>
					</section>
					<section>
						<p>Use Entity Framework</p>
						<aside class="notes">
							<ul>
								<li>Another great option is to use an ORM</li>
								<li>That way, everything is done for us</li>
							</ul>
						</aside>
					</section>
					<section>
						<pre><code data-trim>
							[HttpGet]
							public void Get([FromQuery] int id)
							{
								var pet = _context
									.Pets
									.Find(id);

								// Do other stuff
							}
						</code></pre>

						<aside class="notes">
							<ul>
								<li>So that takes our SQL query, and allows us to write it like this</li>
								<li>Our threat disappears</li>
							</ul>
						</aside>
					</section>
					<section>
						<pre><code data-trim>
							[HttpGet]
							public void Get([FromQuery] string search)
							{
								var pets = _context
									.Pets
									.Where(pet => pet
										.Name == search);

								// Do other stuff
							}
						</code></pre>
						<aside class="notes">
							<ul>
								<li>Even if we change the data type back to a string, EF still thwarts the attack</li>
								<li>Linq queries are not created using concatenation, so we don't need to worry about injection here</li>
							</ul>
						</aside>
					</section>
				</section>

				<section>
					<section>
						<h3>Broken Authentication</h3>
					</section>
					<section>
						<img src="images\youshallnotpass.jpg" height="300"/>
						<aside class="notes">
							<ul>
								<li>This is what we want to say, but it doesn't always happen</li>
							</ul>
						</aside>
					</section>
					<section>
						<p>Exactly what it sounds like...</p>
						<aside class="notes">
							<ul>
								<li>Your auth is broken...?</li>
							</ul>
						</aside>
					</section>
					<section>
						<h4>What could I be doing wrong?</h4>
						<p class="fragment">Allowing credential stuffing</p>
						<p class="fragment">Allowing brute force</p>
						<p class="fragment">Bad password restrictions & recovery</p>
						<aside class="notes">
							<ul>
								<li>Credential stuffing is the automated injection of breached username/password pairs in order to fraudulently gain access to user accounts.</li>
								<li>Basically shoving breached usernames and passwords until something works</li>
								<li>Brute force - basically trying again and again until something works, maybe with a list of passwords?</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Impacts</h3>
						<p class="fragment">Depends on your app...</p>
						<p class="fragment">Leak sensitive information</p>
						<p class="fragment">Money laundering</p>
						<p class="fragment">Identity theft</p>
						<aside class="notes">
							<ul>
								<li>Could be this or this or that, just depends on what your software does</li>
							</ul>
						</aside>
					</section>
					<section>
						<h3>Prevention</h3>
					</section>
					<section>
						<p>Remove default logins</p>
						<aside class="notes">
							<ul>
								<li>Convenient for testing, but also for attackers</li>
							</ul>
						</aside>
					</section>
					<section>
						<p class="fragment">admin</p>
						<p class="fragment">P@ssw0rd</p>
						<aside class="notes">
							<ul>
								<li>We've all done it</li>
								<li>Do not publish with this as an active user account!</li>
							</ul>
						</aside>
					</section>
					<section>
						<p>Password restrictions</p>
					</section>
					<section>
						<ul>
							<li class="fragment">Minimum length</li>
							<li class="fragment">Maximum age</li>
							<li class="fragment">History</li>
							<li class="fragment">Complexity</li>
						</ul>
					</section>
					<section>
						<p>ASP.NET Identity</p>
						<aside class="notes">
							<ul>
								<li>Can do a lot of what you need for you</li>
								<li>Easy to get up and running</li>
							</ul>
						</aside>
					</section>
					<section>
						<pre><code data-trim>
							services.Configure&lt;IdentityOptions&gt;(options =>
								{
									// Default Password settings.
									options.Password.RequireDigit = true;
									options.Password.RequireLowercase = true;
									options.Password.RequireNonAlphanumeric = true;
									options.Password.RequireUppercase = true;
									options.Password.RequiredLength = 6;
									options.Password.RequiredUniqueChars = 1;
								});
						</code></pre>
						<aside class="notes">
							<ul>
								<li>Here's how you might set it up in a .NET Core 2.0 app</li>
								<li>This would go in the Startup.cs</li>
							</ul>
						</aside>
					</section>
					<section>
						<p>Multi-factor authentication!</p>
						<aside class="notes">
							<ul>
								<li>Use it!!!!</li>
								<li>Provides extra security</li>
								<li>Can easily be set up with ASP.NET Identity</li>
							</ul>
						</aside>
					</section>
				</section>

				<section>
					<section>
						<h3>Sensitive Data Exposure</h3>
					</section>
					<section>
						<img src="images\number3.gif"/>
					</section>
					<section>
						Not encrypting the right stuff
					</section>
					<section>
						<h4>What could I be doing wrong?</h4>
						<p class="fragment">Sending data in plain text</p>
						<p class="fragment">Weak key generation</p>
						<p class="fragment">Weak storage techniques</p>
					</section>
					<section>
						<h3>Impacts</h3>
						<p class="fragment">Comprised data</p>
						<p class="fragment">Personal information</p>
						<p class="fragment">Health records</p>
						<p class="fragment">Credit cards</p>
					</section>
					<section>
						<h3>Prevention</h3>
					</section>
					<section>
						<p>Store only necessary data</p>
					</section>
					<section>
						<p>Use HTTPS</p>
					</section>
					<section>
						<img src="images/httpsonly.PNG" />
					</section>
					<section>
						<p>Disable caching</p>
					</section>
					<section>
						<pre><code data-trim>
							[ResponseCache(Duration = 0, 
								Location = ResponseCacheLocation.None, NoStore = true)]
							public class PetsController : Controller
							{
								// control the things
							}
						</code></pre>
					</section>
				</section>

				<section>
					<section>
						<h3>XML External Entities (XXE)</h3>
					</section>
					<section>
						<img src="images\xml.jpg"/>
					</section>
					<section>
						<p>Exploitation of vulnerable XML processors</p>
					</section>
					<section>
						<h4>What could I be doing wrong?</h4>
						<p class="fragment">Accepting XML directly</p>
						<p class="fragment">Not testing</p>
					</section>
					<section>
						<h3>Impacts</h3>
						<p class="fragment">Data can be extracted</p>
						<p class="fragment">Execution of remote requests</p>
						<p class="fragment">Scan internal systems</p>
						<p class="fragment">DOS attacks</p>
					</section>
					<section>
						<h3>Prevention</h3>
					</section>
					<section>
						<p>Don't use XML</p>
					</section>
					<section>
						<p>Don't allow external entities to resolve at all</p>
					</section>
					<section>
						<pre><code data-trim>
							var xmlDocument = new XmlDocument();
							xmlDocument.XmlResolver = null;
						</code></pre>
					</section>
					<section>
						<p>Keep libraries updated</p>
					</section>
				</section>

				<section>
					<section>
						<h3>Broken Access Control</h3>
					</section>
					<section>
						<img src="images/accesscontrol.jpg" height="400"/>
					</section>
					<section>
						<p>Users being able to perform unauthorized actions</p>
					</section>
					<section>
						<h4>What could I be doing wrong?</h4>
						<p class="fragment">Lack of automated detection</p>
						<p class="fragment">Not testing</p>
					</section>
					<section>
						<h3>Impacts</h3>
						<p class="fragment">Attackers can act as users or admins</p>
						<p class="fragment">Could do anything that user could</p>
						<p class="fragment">Ability to create, read, update, and delete records</p>
					</section>
					<section>
						<h3>Prevention</h3>
					</section>
					<section>
						<p>Deny by default</p>
					</section>
					<section>
						<p>Record ownership</p>
					</section>
					<section>
						<pre><code data-trim>
							[Authorize(Roles = "Administrator")]
							public class PetsController : Controller
							{
								// control the things
							}
						</code></pre>
					</section>
					<section>
						<p>Log access control failures</p>
					</section>
					<section>
						<p class="fragment">ASP.NET Identity</p>
						<p class="fragment">Third party loggers</p>
					</section>
				</section>

				<section>
					<section>
						<h3>Security Misconfiguration</h3>
					</section>
					<section>
						<img src="images/cheeto.jpg"/>
					</section>
					<section>
						Attempt to gain unauthorized access or knowledge
					</section>
					<section>
						<h4>What could I be doing wrong?</h4>
						<p class="fragment">Leaving bugs unpatched</p>
						<p class="fragment">Default accounts</p>
						<p class="fragment">Unprotected files</p>
					</section>
					<section>
						<h3>Impacts</h3>
						<p class="fragment">Unauthorized access to system data</p>
						<p class="fragment">Could result in complete system compromise</p>
					</section>
					<section>
						<h3>Prevention</h3>
					</section>
					<section>
						<p>Minimal features & frameworks</p>
					</section>
					<section>
						<p>Azure <span class="fragment">DevOps</span></p>
						<aside class="notes">
							CI & CD, segmented app architecture
						</aside>
					</section>
					<section>
						<img src="images/build.PNG">
					</section>
					<section>
						<img src="images/release.PNG">
					</section>
				</section>

				<section>
					<section>
						<h3>Cross-Site Scripting (XSS)</h3>
					</section>
					<section>
						<img src="images/xss.jpg">
					</section>
					<section>
						Injecting malicious scripts in order for data to be sent elsewhere
					</section>
					<section>
						<h3>Types of XSS</h3>
						<p class="fragment">Reflected</p>
						<p class="fragment">Stored</p>
						<p class="fragment">DOM</p>
					</section>
					<section>
						<h4>What could I be doing wrong?</h4>
						<p class="fragment">Blindly accepting input again</p>
					</section>
					<section>
						<h3>Impacts</h3>
						<p class="fragment">Depends on the type...</p>
						<p class="fragment">Moderate for reflected & DOM</p>
						<p class="fragment">Severe for stored</p>
					</section>
					<section>
						<h3>Prevention</h3>
					</section>
					<section>
						<p>Escape untrusted input</p>
					</section>
					<section>
						<pre><code data-trim>
							@{
								var untrustedInput = "&lt;\"123\"&gt;";
							}
						 
							@untrustedInput
						</code></pre>
					</section>
					<section>
						<img src="images/xsssnippet.PNG" height="80">
					</section>
					<section>
						<p>Enable CSP</p>
					</section>
					<section>
						<pre><code data-trim>
							app.Use(async (context, next) =>
							{
								context.Response.Headers.Add(
									"Content-Security-Policy",
									"script-src 'self';");

								await next();
							});
						</code></pre>
					</section>
				</section>

				<section>
					<section>
						<h3>Insecure Deserialization</h3>
					</section>
					<section>
						<img src="images/deserialization.jpg"/>
					</section>
					<section>
						<p>Deserializing untrusted, potentially malicious objects</p>
					</section>
					<section>
						<h4>What could I be doing wrong?</h4>
						<p class="fragment">Deserializing anything and everything</p>
					</section>
					<section>
						<h3>Impacts</h3>
						<p class="fragment">Remote code execution</p>
						<p class="fragment">Ability to create, read, update, and delete records</p>
					</section>
					<section>
						<h3>Prevention</h3>
					</section>
					<section>
						<p>Don't serialize untrusted objects</p>
					</section>
					<section>
						<p>Type constraints</p>
					</section>
					<section>
						<pre><code data-trim>
							Pet pet = JsonConvert.DeserializeObject&lt;Pet&gt;(jsonString);
						</code></pre>
					</section>
					<section>
						<p>Log deserialization exceptions</p>
					</section>
				</section>

				<section>
					<section>
						<h3>Using Components with Known Vulnerabilities</h3>
					</section>
					<section>
						<img src="images/vulnerabilities.jpg">
					</section>
					<section>
						<p>It's in the name</p>
					</section>
					<section>
						<img src="images\aspen.jpg"/>
					</section>
					<section>
						<h4>What could I be doing wrong?</h4>
					</section>
					<section>
						<h3>Impacts</h3>
						<p class="fragment">Could range in severity</p>
						<p class="fragment">Could be minor...</p>
						<p class="fragment">but has been the cause of some of the largest breaches</p>
					</section>
					<section>
						<h3>Prevention</h3>
					</section>
					<section>
						<p>Don't keep what you don't use</p>
					</section>
					<section>
						<p>Update what you do use</p>
					</section>
				</section>

				<section>
					<section>
						<h3>Insufficient Logging & Monitoring</h3>
					</section>
					<section>
						<img src="images/log.jpg"/>
					</section>
					<section>
						<p>Failing to log important events</p>
					</section>
					<section>
						<h4>What could I be doing wrong?</h4>
						<p class="fragment">Not enough logging</p>
						<p class="fragment">No logging at all!</p>
					</section>
					<section>
						<h3>Impacts</h3>
						<p class="fragment">Threats that could have been stopped get through</p>
						<p class="fragment">Could result in a severe breach</p>
					</section>
					<section>
						<h3>Prevention</h3>
					</section>
					<section>
						<p>Logging frameworks</p>
					</section>
					<section>
						<ul>
							<li class="fragment">NLog</li>
							<li class="fragment">Log4NET</li>
							<li class="fragment">ELMAH</li>
						</ul>
					</section>
					<section>
						<p>Format logs</p>
					</section>
					<section>
						<p>Log everything</p>
					</section>
				</section>

				<section>
					<h5>What have we learned?</h5>
				</section>

				<section>
					<section>
						<h5>Slides</h5>
						<p>https://github.com/ty8356/DontGetHacked</p>
					</section>
				</section>

				<section>
					<section>
						<h3>Thank you!</h3>
					</section>
				</section>
			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true }
				]
			});
		</script>
	</body>
</html>
